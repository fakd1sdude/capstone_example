{% extends 'base.html' %}

{% block content %}


<h1 id="">This is inventory</h1>

<input type="text" 
       name="search" 
       id="search" 
       placeholder="Search"
       hx-post="{{url_for('search_item')}}"
       hx-include="this"
       hx-trigger="keyup"
       hx-target="#table-body"
       hx-swap="innerHTML">

<table id="item-table">
    <thead>
        <th>Item ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Amount</th>
        <th>Exp. Date</th>
        <th>Action</th>


    </thead>
    <tbody id="table-body">
        {% if item %}
            {% for row in item %}
            <tr id="item-row-{{row['item_id']}}">
                <td>{{row['item_id']}}</td>
                <td>{{row['item_name'] }}</td>
                <td>{{row['item_price'] }}</td>
                <td>{{row['item_amount'] }}</td>
                <td>{{row['item_exp_date'] }}</td>
                <td>


                    <button class="btn btn-success"
                            hx-get="{{url_for('update_item', item_id=row['item_id'])}}"
                            hx-target="#item-row-{{row['item_id']}}"
                            
                    >
                    Update</button>


                    
                    <button class="btn btn-danger"
                            hx-delete="{{url_for('delete_item', item_id=row['item_id'])}}"
                            hx-swap="delete"
                            hx-target="#item-row-{{row['item_id']}}">Delete</button>
                    

                </td>
            </tr>
            {% endfor %}
        {% endif %}
    </tbody>
    
</table>

<form action="{{ url_for('add_item')}}" method="POST" id="my_form" hx-boost="true">
    <input type="text" name="item_name">
    <input type="text" name="item_price">
    <input type="file" name="item_amount">
    <input type="text" name="item_exp_date">
    <button class="btn btn-primary">Add Item</button>
</form>

<a href="{{url_for('login')}}">Login</a>


{% endblock %}